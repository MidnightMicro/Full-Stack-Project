<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://www.google.com">
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <style> @media screen and (max-width: 1080px) and (min-width: 1315px) {
      #mealImage{
        width: 100px;
      }
    };
      </style>
    <title>Meal Ideas</title>
</head>
<body>
    <!-- add bootstrap to make cards /images better and make responsive combine userID/ work on login and registration better implement express static-->
    <!-- look at password-example on how to implement express static-->
            <h1>Welcome to the Random Meal Finder 3000!</h1>
            <h2>Please log in to begin</h2>
            <form id="login">
              <div>
                <label>Email:</label><input type="text" name="email"></input>
              </div>
              <div>
                <label>Password:</label><input type="password" name="password">
              </div>
              <br> <input type="submit" value="Submit">
            </form>
                 <p>Donâ€™t have an account? <a href=register.html>Sign Up Now!</a></p>
              </div> 

      </form>
    <!-- <h1>Get your meal ideas here!</h1>
        <form id="foodSearch">
            <label>Protein:</label> <input type="text" class="Protein" id="Protein"/></label>

            <button type="submit">Send Data</button>
          </form>
          <button>show data</button> 
        <div id="meal_data" class="container" method="post">
            <section id="sectionCard" class="container-fluid">
              <div class="row">
                  <img id="mealImage" />
                  <div class="col">
                  <h1 id="mealName"></h1>
                    <br>
                  </div>
                </div> -->
<script>
 document.getElementById('login').addEventListener('submit', (event) => {
      event.preventDefault();
      const email = event.target.email.value;
      const password = event.target.password.value;
      const body = {        
        email: email,
        password: password,
      }

      fetch('/login', {
        method: "POST",
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(body)
      }).then((res) => res.json())
        .then((data) => {
    if (data.success) {
        window.location.href = "/home.html";
      } else {
        alert("Please provide correct details or register again");
      }
    })
    .catch((error) => {
      console.error("Fetch error:", error);
        })
    })

</script>
</body>
</html>