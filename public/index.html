<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://www.google.com">
    <link rel="shortcut icon" href="#">

    <title>Meal Ideas</title>
</head>
<body>
    <!-- add bootstrap to make cards /images better and make responsive combine userID/ work on login and registration better implement express static-->
    <!-- look at password-example on how to implement express static-->
    <div class="login">
          <div class="container">
      
            <h2>Login</h2>
            <form action="login" method="post">
              <div class="form-group">
                <label for="username">Email:</label>
                <input type="email" id="username" name="email" required />
              </div>
              <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required />
              </div>
              <div class="form-group">
                <input type="submit" value="Login" />
              </div> 
              <div>
              <a class="click" href="/">Register</a>
            </div>
          </nav>
      
            </form>
          </div>
    </div>
    <h1>Get your meal ideas here!</h1>
        <form id="foodSearch">
            <label>Protein:</label> <input type="text" class="Protein" id="Protein"/></label>

            <button type="submit">Send Data</button>
          </form>
          <!-- <button>show data</button> -->
        <div id="meal_data">
            <!-- card being added via js -->
            <section id="sectionCard" class="container-fluid">
              <div class="row">
                  <img id="mealImage" />
                  <div class="col">
                  <h1 id="mealName"></h1>
                    <br>
                  </div>
              </div>
            </section>
        </div>
<script src="./app.js"></script>
<!-- <script>
let form = document.getElementById("foodSearch");
let myProtein = document.getElementById("Protein").value;
// var myCarbs = document.querySelector(".Carbs").value;
let meal_data = document.querySelector("#meal_data")

form.addEventListener("submit", async (event) => {
event.preventDefault();
// let obj = {
// Protein:myProtein.value,
// Carbs:myCarbs.value,
// };
// const mealData = myProtein;
console.log(myProtein)

const mealDbResponse = await fetch (`https://www.themealdb.com/api/json/v1/1/filter.php?i=${myProtein}`);
const FoodData = await mealDbResponse.json();
console.log(FoodData);
const image = document.getElementById("mealImage");
const mealName = document.getElementById("mealName");
// const mealInfo = document.getElementById("mealInfo");
// const entireCardSection = document.getElementById("sectionCard");
if (FoodData.meals == null || FoodData.meals.length <= 0) {
    console.log("No Data Here");
    image.setAttribute(
      "src",
      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxEAb7d9Y-41XsSwlDBOIgl41HgvsUyV9heA&usqp=CAU"
    );
    mealName.innerHTML =
      'Sorry, could not process what meal you are looking for!';
      console.log("wooo")

}
    else if (FoodData.meals.length > 0) {
    let HTMLfragment = "";
    FoodData.meals.forEach((meal) => {
        HTMLfragment += `<section onclick="openTab(${meal.idMeal})" id=${meal.idMeal} class="container-fluid">
                            <div class="row">
                                <img class="mealImage" src= ${meal.strMealThumb} />
                                <div class="col">
                                <h1 id="mealName">${meal.strMeal}</h1>
                                  <br>
                                </div>
                            </div>
                        </section>`
    });
   meal_data.innerHTML = HTMLfragment
  }
})
//idMeal/parameter is placeholder

function openTab (idMeal) {
console.log(idMeal);

sessionStorage.setItem("idMeal", idMeal)
window.open("./mealDetails.html", '_blank')
}


// add id to local storage, create new tab 

</script> -->

</body>
</html>